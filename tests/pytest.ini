[pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Default command-line options
# -v: verbose
# --strict-markers: error on unknown markers
# --tb=short: shorter tracebacks
# -m "not tier2": skip Tier 2 tests by default (use --tier2 to run them)
addopts =
    -v
    --strict-markers
    --tb=short
    -m "not tier2"

# Custom markers
markers =
    tier1: Fast regression tests (< 30 seconds) - run on every commit
    tier2: Comprehensive E2E tests with firmware compilation (5-15 minutes)
    qmk: Requires QMK toolchain (avr-gcc, arm-none-eabi-gcc)
    zmk: Requires ZMK toolchain (west build or Docker)
    requires_docker: Requires Docker daemon running
    requires_qmk_firmware: Requires QMK firmware repository (set QMK_FIRMWARE_PATH)
    requires_zmk_firmware: Requires ZMK firmware repository (set ZMK_REPO)
    slow: Slow test (> 30 seconds)

# Minimum Python version
minversion = 3.11

# Console output
console_output_style = progress
